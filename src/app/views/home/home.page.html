<ion-app class="mobile">
  <div class="ion-page" main>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Home</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <form [formGroup]="homeForm">
        <div>
          <ion-card class="vertical-margin border-top">
            <div>
              <ion-item class="textarea">
                <ion-textarea name="post" type="post" formControlName="post" placeholder="Write here..." required></ion-textarea>
              </ion-item>
            </div>
            <div>
              <ionalert>
                <section>
                  <ion-button (click)="alert()" expand="block">Post</ion-button>
                </section>
              </ionalert>
            </div>
          </ion-card>
          <div *ngIf="user" >
            <ion-card color="secondary" class="vertical-margin" *ngFor="let post of user.activity">
              <ion-toolbar color="secondary"> {{post.owner}}: {{post.message}}</ion-toolbar>
            </ion-card>
          </div>
        </div>
      </form>
    </ion-content>
  </div>
</ion-app>

<div class="web">
<mat-toolbar color="primary">
  <mat-toolbar-row class="background-primary">
    <span class="margin-left-auto" style="color: white">Erasmus</span>
    <form [formGroup]="form" class="search-form margin-right-auto">
      <div>
        <label class="search-input">
          <input matInput (keyup)="updateSuggestions($event)" [matAutocomplete]="auto" placeholder="Search...">
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let suggestion of suggestions" [value]="suggestion">{{suggestion}}</mat-option>
          </mat-autocomplete>
        </label>
        <button type="submit" class="search-button">
          <i class="material-icons search-icon">search</i>
        </button>
      </div>
    </form>
    <div class="toolbar-container margin-right-auto">
      <div class="toolbar-buttons">
        <div class="pointer" [routerLink]="'/home'">
          <div>
            <i class="material-icons">home</i>
          </div>
          <div class="menu-title white-text">
              Home
          </div>
        </div>
        <div class="pointer" [routerLink]="'/profile'">
          <div>
            <i class="material-icons">person</i>
          </div>
          <div class="menu-title white-text">
            Profile
          </div>
        </div>
        <div class="pointer" [routerLink]="'/friends'">
          <div>
            <i class="material-icons">group</i>
          </div>
          <div class="menu-title white-text">
            Friends
          </div>
        </div>
        <div class="pointer" [routerLink]="'/message'">
          <div>
            <i class="material-icons">chat</i>
          </div>
          <div class="menu-title white-text">
            Chat
          </div>
        </div>
      </div>
    </div>
    <div routerLink="/login" class="pointer margin-right-auto" style="color: white" (click)="logOff()">Log Off</div>
  </mat-toolbar-row>
</mat-toolbar>

<!--Body of the Web Page-->
<div class="container">
  <div class="main-content">
    <!--Left Column-->
    <div class="col-lg-3 col-md-3 col-sm-3">
      <mat-card class="vertical-margin no-padding">
        <div style="height: 250px">
          <div style="background: #e44d3a; height: 50%">
            <div class="personal-icon">
              <img mat-card-image class="image-contain" src="{{this.photo}}"/>
            </div>
          </div>
          <div style="height: 70%">
            <div class="personal-info-container">
              <div *ngIf="user" class="personal-name">
                {{user.name}}
              </div>
              <div class="personal-status">
                Status
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="followers" class="personal-item">
          <p class="personal-item-title">Followers</p>
          {{followers.length}}
        </div>
        <div *ngIf="following" class="personal-item">
          <p class="personal-item-title">Following</p>
          {{following.length}}
        </div>
      </mat-card>
      <mat-card>
        <input #imageInput
               type = 'file'
               accept="image/*"
               (change) = "processPhoto(imageInput)">
        <img mat-card-image src="{{this.photo}}">

      </mat-card>
    </div>
    <!--Middle Column-->
    <div class="col-lg-5 col-md-5 col-sm-5">
      <!--Post Card-->
      <div>
        <mat-card class="vertical-margin border-top">
          <div>
            <mat-form-field class="textarea">
                <textarea matInput
                          cdkTextareaAutosize
                          #autosize="cdkTextareaAutosize"
                          cdkAutosizeMinRows="3"
                          cdkAutosizeMaxRows="7"
                          [(ngModel)]="postMessage"></textarea>
            </mat-form-field>
          </div>
          <div>
            <button mat-raised-button class="background-primary white-text" (click)="publishPost()">Post</button>
          </div>
        </mat-card>
      </div>
      <!--Wall Card-->
      <div *ngIf="user">
        <div *ngFor="let activity of user.activity">
          <mat-card class="vertical-margin middle-card">
            <div>
              {{activity.message}}
            </div>
            <i class="material-icons delete-icon" (click)="deleteEvent(activity)">delete_forever</i>
          </mat-card>
        </div>
      </div>
    </div>
    <!--Right Column-->
    <div class="col-lg-3 col-md-3 col-sm-3">
      <mat-card class="vertical-margin">
        <div class="vertical-margin">
          FOLLOWING
        </div>
        <mat-divider></mat-divider>
        <mat-list *ngIf="user">
          <div *ngFor="let follow of following">
          <mat-list-item>
            <div>
              {{follow.name}}
            </div>
            <div class="chat chat-unavailable">
              <i class="material-icons">chat</i>
            </div>
          </mat-list-item>
          </div>
        </mat-list>
      </mat-card>
    </div>
  </div>
</div>
</div>
