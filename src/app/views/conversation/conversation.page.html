<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>{{name}} - Conversation</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list id="scroll-this" style="height: 80%; overflow-y: scroll;" (loadeddata)="scrollToBottom()">
    <ion-item *ngFor="let msg of messages">
      <p text-right *ngIf="msg.author === user.email" style="width: 100%">
        <span style="color: gray">Me: </span>
        {{msg.text}}
        <br>
        <ion-icon *ngIf="msg.read == false" name="checkmark"></ion-icon>
        <ion-icon *ngIf="msg.read == true" name="done-all"></ion-icon>
        <span style="color: gray; font-size: x-small">{{formatDate(msg.timestamp)}}</span>
      </p>
      <p text-left *ngIf="msg.author !== user.email" style="width: 100%">
        <span style="color: gray">{{name}}: </span>
        {{msg.text}}
        <br>
        <span style="color: gray; font-size: x-small">{{formatDate(msg.timestamp)}}</span>
      </p>
    </ion-item>
  </ion-list>
  <ion-row style="position: fixed; bottom: 0; width: 100%;">
    <ion-col size="7">
      <ion-textarea #box placeholder="Type a message..."
                    (keyup.enter)="onEnter(box.value); box.value = '' ">
      </ion-textarea>
    </ion-col>
    <ion-col>
      <ion-button (click)="onEnter(box.value); box.value = '' ">
        Send
        <ion-icon slot="end" name="send" size="large"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
</ion-content>
