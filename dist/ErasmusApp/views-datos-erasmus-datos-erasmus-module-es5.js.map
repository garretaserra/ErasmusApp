{"version":3,"sources":["src/app/views/datos-erasmus/datos-erasmus.page.html","src/app/views/datos-erasmus/datos-erasmus-routing.module.ts","src/app/views/datos-erasmus/datos-erasmus.module.ts","src/app/views/datos-erasmus/datos-erasmus.page.scss","src/app/views/datos-erasmus/datos-erasmus.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-app class=\\\"mobile\\\">\\r\\n  <div class=\\\"ion-page\\\" main>\\r\\n    <ion-header>\\r\\n      <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n          <ion-menu-button></ion-menu-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title slot=\\\"start\\\">Erasmus Info</ion-title>\\r\\n      </ion-toolbar>\\r\\n        <ion-text class=\\\"toolbar-buttons\\\">Hi! To enjoy the full experience of Erasmus, you should fill these fields to improve people search...</ion-text>\\r\\n    </ion-header>\\r\\n    <ion-content>\\r\\n      <form [formGroup]=\\\"erasmusForm\\\">\\r\\n        <div>\\r\\n          <ion-card class=\\\"vertical-margin border-top\\\">\\r\\n              <ion-item class=\\\"textarea\\\">\\r\\n                <ion-textarea name=\\\"age\\\" type=\\\"text\\\" formControlName=\\\"age\\\" placeholder=\\\"Edad\\\" required></ion-textarea>\\r\\n              </ion-item>\\r\\n              <ion-item class=\\\"textarea\\\">\\r\\n                <ion-textarea name=\\\"course\\\" type=\\\"text\\\" formControlName=\\\"course\\\" placeholder=\\\"Curso actual\\\" required></ion-textarea>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                <ion-label>Home University</ion-label>\\r\\n                <ion-select [interfaceOptions]=\\\"customAlertHomeOptions\\\" interface=\\\"alert\\\" class=\\\"ion-text-lg-wrap\\\" formControlName=\\\"homeUniversity\\\"\\r\\n                            multiple=\\\"false\\\" cancelText=\\\"Cancel\\\" okText=\\\"Okay!\\\" required placeholder=\\\"Select One\\\">\\r\\n                  <ion-select-option *ngFor=\\\"let university of universities\\\">{{university.name}}</ion-select-option>\\r\\n                </ion-select>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                  <ion-label>Destination University</ion-label>\\r\\n                  <ion-select [interfaceOptions]=\\\"customAlertDestOptions\\\" interface=\\\"alert\\\" class=\\\"ion-text-lg-wrap\\\" formControlName=\\\"destUniversity\\\"\\r\\n                              multiple=\\\"false\\\" cancelText=\\\"Cancel\\\" okText=\\\"Okay!\\\" placeholder=\\\"Select One\\\">\\r\\n                      <div *ngIf=\\\"homeUniversity;else noHomeUniversity\\\">\\r\\n                          <div *ngFor=\\\"let university of universities\\\">\\r\\n                              <ion-select-option *ngIf=\\\"university.name!==this.homeUniversity\\\" >\\r\\n                                  {{university.name}}\\r\\n                              </ion-select-option>\\r\\n                          </div>\\r\\n                      </div>\\r\\n                      <ng-template #noHomeUniversity>\\r\\n                          <ion-text>Select first home university</ion-text>\\r\\n                      </ng-template>\\r\\n                  </ion-select>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                <ion-label>Languages</ion-label>\\r\\n                <ion-select formControlName=\\\"languages\\\" multiple=\\\"true\\\" cancelText=\\\"Cancel\\\" okText=\\\"Okay!\\\" required>\\r\\n                  <ion-select-option *ngFor=\\\"let language of languages\\\">{{language}}</ion-select-option>\\r\\n                </ion-select>\\r\\n              </ion-item>\\r\\n            <div>\\r\\n              <ion-button [disabled]=\\\"!erasmusForm.valid\\\" (click)=\\\"add()\\\" color=\\\"medium\\\" expand=\\\"block\\\">Add</ion-button>\\r\\n            </div>\\r\\n          </ion-card>\\r\\n        </div>\\r\\n      </form>\\r\\n    </ion-content>\\r\\n  </div>\\r\\n</ion-app>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DatosErasmusPage } from './datos-erasmus.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DatosErasmusPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DatosErasmusPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DatosErasmusPageRoutingModule } from './datos-erasmus-routing.module';\r\n\r\nimport { DatosErasmusPage } from './datos-erasmus.page';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        IonicModule,\r\n        DatosErasmusPageRoutingModule,\r\n        ReactiveFormsModule\r\n    ],\r\n  declarations: [DatosErasmusPage]\r\n})\r\nexport class DatosErasmusPageModule {}\r\n","export default \".toolbar-buttons {\\n  display: -webkit-box;\\n  display: flex;\\n  text-align: center;\\n  margin: 5%;\\n}\\n\\nion-select-option {\\n  font-size: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvZGF0b3MtZXJhc211cy9DOlxcVXNlcnNcXHNnYWxlXFxXZWJzdG9ybVByb2plY3RzXFxFcmFzbXVzQXBwL3NyY1xcYXBwXFx2aWV3c1xcZGF0b3MtZXJhc211c1xcZGF0b3MtZXJhc211cy5wYWdlLnNjc3MiLCJzcmMvYXBwL3ZpZXdzL2RhdG9zLWVyYXNtdXMvZGF0b3MtZXJhc211cy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxvQkFBQTtFQUFBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLFVBQUE7QUNDRjs7QURFQTtFQUNFLGVBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL2RhdG9zLWVyYXNtdXMvZGF0b3MtZXJhc211cy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudG9vbGJhci1idXR0b25ze1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbjogNSU7XHJcbn1cclxuXHJcbmlvbi1zZWxlY3Qtb3B0aW9uIHtcclxuICBmb250LXNpemU6IDEwcHg7XHJcbn1cclxuIiwiLnRvb2xiYXItYnV0dG9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luOiA1JTtcbn1cblxuaW9uLXNlbGVjdC1vcHRpb24ge1xuICBmb250LXNpemU6IDEwcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport {FormBuilder, FormControl, FormGroup} from '@angular/forms';\r\nimport {HomeService} from '../home/home.service';\r\nimport {UserService} from '../../models/User/user.service';\r\nimport {Router} from '@angular/router';\r\nimport {AlertController, MenuController, ToastController} from '@ionic/angular';\r\nimport {StorageComponent} from '../../storage/storage.component';\r\nimport {DatosErasmusService} from './datos-erasmus.service';\r\nimport {User} from '../../models/User/user';\r\nimport {UserErasmus} from '../../models/User/userErasmus';\r\nimport {University} from \"../../models/university\";\r\nimport {Language} from \"../../models/language\";\r\n\r\n@Component({\r\n  selector: 'app-datos-erasmus',\r\n  templateUrl: './datos-erasmus.page.html',\r\n  styleUrls: ['./datos-erasmus.page.scss'],\r\n})\r\n\r\nexport class DatosErasmusPage implements OnInit {\r\n\r\n  erasmusForm: FormGroup;\r\n  user: User;\r\n  homeUniversity: string;\r\n  destUniversity: string;\r\n  languages: string[];\r\n  universities: any[];\r\n\r\n  customAlertHomeOptions: any = {\r\n    header: 'Home university',\r\n    subHeader: 'Select your home university',\r\n    message: '',\r\n    translucent: true\r\n  };\r\n\r\n  customAlertDestOptions: any = {\r\n    header: 'Destination university',\r\n    subHeader: 'Select your destination university',\r\n    message: 'It is not mandatory if you are not abroad yet!',\r\n    translucent: true\r\n  };\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private erasmusService: DatosErasmusService,\r\n              private router: Router,\r\n              public menuCtrl: MenuController,\r\n              public alertCtrl: AlertController,\r\n              public storage: StorageComponent,\r\n              private toastCtrl: ToastController) {}\r\n\r\n  async ngOnInit() {\r\n    this.erasmusForm = this.formBuilder.group({\r\n      age: new FormControl(),\r\n      course: new FormControl(),\r\n      homeUniversity: new FormControl(),\r\n      destUniversity: new FormControl(),\r\n      languages: new FormControl()\r\n    });\r\n    this.load();\r\n  }\r\n\r\n  async ionViewDidEnter() {\r\n    this.load();\r\n  }\r\n\r\n  async load() {\r\n    let storageUser = this.storage.getUser();\r\n\r\n    if (!storageUser) {\r\n      console.log('goto login');\r\n      await this.router.navigateByUrl('/login');\r\n    } else {\r\n      this.user = JSON.parse(storageUser);\r\n      console.log('this.user: ', this.user);\r\n      await this.storage.saveUser(storageUser);\r\n    }\r\n\r\n    await this.erasmusService.getUniversities().subscribe(res => {\r\n          this.universities = res.universities;\r\n        }\r\n    );\r\n\r\n    this.languages = [\r\n      'Spanish',\r\n      'French',\r\n      'Italian',\r\n      'German',\r\n      'English'\r\n    ];\r\n\r\n    this.onChanges();\r\n  }\r\n\r\n  async add() {\r\n    this.languages = this.erasmusForm.controls.languages.value;\r\n    let spokenLanguages = [];\r\n    this.languages.forEach(language => {spokenLanguages.push(new Language(language))});\r\n    console.log(spokenLanguages);\r\n    if(this.erasmusForm.controls.destUniversity.value) this.destUniversity = this.erasmusForm.controls.destUniversity.value.split(',')[0];\r\n    await this.erasmusService.sendInformation(this.user._id, new UserErasmus(this.erasmusForm.controls.age.value,\r\n        this.erasmusForm.controls.course.value,\r\n        this.homeUniversity,\r\n        this.destUniversity,\r\n        spokenLanguages)).subscribe(res => console.log(res));\r\n  }\r\n\r\n  onChanges(): void {\r\n    this.erasmusForm.get('homeUniversity').valueChanges.subscribe(val => {\r\n      this.homeUniversity = val.split(',')[0];\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"views-datos-erasmus-datos-erasmus-module-es5.js"}