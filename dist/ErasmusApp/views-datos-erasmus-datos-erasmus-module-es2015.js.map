{"version":3,"sources":["./src/app/views/datos-erasmus/datos-erasmus.page.html","./src/app/views/datos-erasmus/datos-erasmus-routing.module.ts","./src/app/views/datos-erasmus/datos-erasmus.module.ts","./src/app/views/datos-erasmus/datos-erasmus.page.scss","./src/app/views/datos-erasmus/datos-erasmus.page.ts"],"names":[],"mappings":"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","file":"views-datos-erasmus-datos-erasmus-module-es2015.js","sourcesContent":["export default \"<ion-app class=\\\"mobile\\\">\\r\\n  <div class=\\\"ion-page\\\" main>\\r\\n    <ion-header>\\r\\n      <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n          <ion-menu-button></ion-menu-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title slot=\\\"start\\\">Erasmus Info</ion-title>\\r\\n      </ion-toolbar>\\r\\n        <ion-text class=\\\"toolbar-buttons\\\">Hi! To enjoy the full experience of Erasmus, you should fill these fields to improve people search...</ion-text>\\r\\n    </ion-header>\\r\\n    <ion-content>\\r\\n      <form [formGroup]=\\\"erasmusForm\\\">\\r\\n        <div>\\r\\n          <ion-card class=\\\"vertical-margin border-top\\\">\\r\\n              <ion-item class=\\\"textarea\\\">\\r\\n                <ion-textarea name=\\\"age\\\" type=\\\"text\\\" formControlName=\\\"age\\\" placeholder=\\\"Edad\\\" required></ion-textarea>\\r\\n              </ion-item>\\r\\n              <ion-item class=\\\"textarea\\\">\\r\\n                <ion-textarea name=\\\"course\\\" type=\\\"text\\\" formControlName=\\\"course\\\" placeholder=\\\"Curso actual\\\" required></ion-textarea>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                <ion-label>Home University</ion-label>\\r\\n                <ion-select [interfaceOptions]=\\\"customAlertHomeOptions\\\" interface=\\\"alert\\\" class=\\\"ion-text-lg-wrap\\\" formControlName=\\\"homeUniversity\\\"\\r\\n                            multiple=\\\"false\\\" cancelText=\\\"Cancel\\\" okText=\\\"Okay!\\\" required placeholder=\\\"Select One\\\">\\r\\n                  <ion-select-option *ngFor=\\\"let university of universities\\\">{{university.name}}</ion-select-option>\\r\\n                </ion-select>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                  <ion-label>Destination University</ion-label>\\r\\n                  <ion-select [interfaceOptions]=\\\"customAlertDestOptions\\\" interface=\\\"alert\\\" class=\\\"ion-text-lg-wrap\\\" formControlName=\\\"destUniversity\\\"\\r\\n                              multiple=\\\"false\\\" cancelText=\\\"Cancel\\\" okText=\\\"Okay!\\\" placeholder=\\\"Select One\\\">\\r\\n                      <div *ngIf=\\\"homeUniversity;else noHomeUniversity\\\">\\r\\n                          <div *ngFor=\\\"let university of universities\\\">\\r\\n                              <ion-select-option *ngIf=\\\"university.name!==this.homeUniversity\\\" >\\r\\n                                  {{university.name}}\\r\\n                              </ion-select-option>\\r\\n                          </div>\\r\\n                      </div>\\r\\n                      <ng-template #noHomeUniversity>\\r\\n                          <ion-text>Select first home university</ion-text>\\r\\n                      </ng-template>\\r\\n                  </ion-select>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                <ion-label>Languages</ion-label>\\r\\n                <ion-select formControlName=\\\"languages\\\" multiple=\\\"true\\\" cancelText=\\\"Cancel\\\" okText=\\\"Okay!\\\" required>\\r\\n                  <ion-select-option *ngFor=\\\"let language of languages\\\">{{language}}</ion-select-option>\\r\\n                </ion-select>\\r\\n              </ion-item>\\r\\n            <div>\\r\\n              <ion-button [disabled]=\\\"!erasmusForm.valid\\\" (click)=\\\"add()\\\" color=\\\"medium\\\" expand=\\\"block\\\">Add</ion-button>\\r\\n            </div>\\r\\n          </ion-card>\\r\\n        </div>\\r\\n      </form>\\r\\n    </ion-content>\\r\\n  </div>\\r\\n</ion-app>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DatosErasmusPage } from './datos-erasmus.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DatosErasmusPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DatosErasmusPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DatosErasmusPageRoutingModule } from './datos-erasmus-routing.module';\r\n\r\nimport { DatosErasmusPage } from './datos-erasmus.page';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        IonicModule,\r\n        DatosErasmusPageRoutingModule,\r\n        ReactiveFormsModule\r\n    ],\r\n  declarations: [DatosErasmusPage]\r\n})\r\nexport class DatosErasmusPageModule {}\r\n","export default \".toolbar-buttons {\\n  display: -webkit-box;\\n  display: flex;\\n  text-align: center;\\n  margin: 5%;\\n}\\n\\nion-select-option {\\n  font-size: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvZGF0b3MtZXJhc211cy9DOlxcVXNlcnNcXHNnYWxlXFxXZWJzdG9ybVByb2plY3RzXFxFcmFzbXVzQXBwL3NyY1xcYXBwXFx2aWV3c1xcZGF0b3MtZXJhc211c1xcZGF0b3MtZXJhc211cy5wYWdlLnNjc3MiLCJzcmMvYXBwL3ZpZXdzL2RhdG9zLWVyYXNtdXMvZGF0b3MtZXJhc211cy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxvQkFBQTtFQUFBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLFVBQUE7QUNDRjs7QURFQTtFQUNFLGVBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL2RhdG9zLWVyYXNtdXMvZGF0b3MtZXJhc211cy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudG9vbGJhci1idXR0b25ze1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbjogNSU7XHJcbn1cclxuXHJcbmlvbi1zZWxlY3Qtb3B0aW9uIHtcclxuICBmb250LXNpemU6IDEwcHg7XHJcbn1cclxuIiwiLnRvb2xiYXItYnV0dG9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luOiA1JTtcbn1cblxuaW9uLXNlbGVjdC1vcHRpb24ge1xuICBmb250LXNpemU6IDEwcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport {FormBuilder, FormControl, FormGroup} from '@angular/forms';\r\nimport {HomeService} from '../home/home.service';\r\nimport {UserService} from '../../models/User/user.service';\r\nimport {Router} from '@angular/router';\r\nimport {AlertController, MenuController, ToastController} from '@ionic/angular';\r\nimport {StorageComponent} from '../../storage/storage.component';\r\nimport {DatosErasmusService} from './datos-erasmus.service';\r\nimport {User} from '../../models/User/user';\r\nimport {UserErasmus} from '../../models/User/userErasmus';\r\nimport {University} from \"../../models/university\";\r\nimport {Language} from \"../../models/language\";\r\n\r\n@Component({\r\n  selector: 'app-datos-erasmus',\r\n  templateUrl: './datos-erasmus.page.html',\r\n  styleUrls: ['./datos-erasmus.page.scss'],\r\n})\r\n\r\nexport class DatosErasmusPage implements OnInit {\r\n\r\n  erasmusForm: FormGroup;\r\n  user: User;\r\n  homeUniversity: string;\r\n  destUniversity: string;\r\n  languages: string[];\r\n  universities: any[];\r\n\r\n  customAlertHomeOptions: any = {\r\n    header: 'Home university',\r\n    subHeader: 'Select your home university',\r\n    message: '',\r\n    translucent: true\r\n  };\r\n\r\n  customAlertDestOptions: any = {\r\n    header: 'Destination university',\r\n    subHeader: 'Select your destination university',\r\n    message: 'It is not mandatory if you are not abroad yet!',\r\n    translucent: true\r\n  };\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private erasmusService: DatosErasmusService,\r\n              private router: Router,\r\n              public menuCtrl: MenuController,\r\n              public alertCtrl: AlertController,\r\n              public storage: StorageComponent,\r\n              private toastCtrl: ToastController) {}\r\n\r\n  async ngOnInit() {\r\n    this.erasmusForm = this.formBuilder.group({\r\n      age: new FormControl(),\r\n      course: new FormControl(),\r\n      homeUniversity: new FormControl(),\r\n      destUniversity: new FormControl(),\r\n      languages: new FormControl()\r\n    });\r\n    this.load();\r\n  }\r\n\r\n  async ionViewDidEnter() {\r\n    this.load();\r\n  }\r\n\r\n  async load() {\r\n    let storageUser = this.storage.getUser();\r\n\r\n    if (!storageUser) {\r\n      console.log('goto login');\r\n      await this.router.navigateByUrl('/login');\r\n    } else {\r\n      this.user = JSON.parse(storageUser);\r\n      console.log('this.user: ', this.user);\r\n      await this.storage.saveUser(storageUser);\r\n    }\r\n\r\n    await this.erasmusService.getUniversities().subscribe(res => {\r\n          this.universities = res.universities;\r\n        }\r\n    );\r\n\r\n    this.languages = [\r\n      'Spanish',\r\n      'French',\r\n      'Italian',\r\n      'German',\r\n      'English'\r\n    ];\r\n\r\n    this.onChanges();\r\n  }\r\n\r\n  async add() {\r\n    this.languages = this.erasmusForm.controls.languages.value;\r\n    let spokenLanguages = [];\r\n    this.languages.forEach(language => {spokenLanguages.push(new Language(language))});\r\n    console.log(spokenLanguages);\r\n    if(this.erasmusForm.controls.destUniversity.value) this.destUniversity = this.erasmusForm.controls.destUniversity.value.split(',')[0];\r\n    await this.erasmusService.sendInformation(this.user._id, new UserErasmus(this.erasmusForm.controls.age.value,\r\n        this.erasmusForm.controls.course.value,\r\n        this.homeUniversity,\r\n        this.destUniversity,\r\n        spokenLanguages)).subscribe(res => console.log(res));\r\n  }\r\n\r\n  onChanges(): void {\r\n    this.erasmusForm.get('homeUniversity').valueChanges.subscribe(val => {\r\n      this.homeUniversity = val.split(',')[0];\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}