{"version":3,"sources":["src/app/views/profile-event/profile-event.page.html","src/app/views/profile-event/profile-event-routing.module.ts","src/app/views/profile-event/profile-event.module.ts","src/app/views/profile-event/profile-event.page.scss","src/app/views/profile-event/profile-event.page.ts","src/app/views/profile-event/profile-event.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,y3DAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,QAAM,MAAM,GAAW,CACrB;AACE,MAAA,IAAI,EAAE,EADR;AAEE,MAAA,SAAS,EAAE,gDAAA,CAAA,kBAAA;AAFb,KADqB,CAAvB;;AAWA,QAAa,6BAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,6BAA6B,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAJzC,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAA,CAAa,QAAb,CAAsB,MAAtB,CAAD,CADD;AAER,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAD;AAFD,KAAT,CAIyC,CAAA,EAA7B,6BAA6B,CAA7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGb,QAAa,sBAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,sBAAsB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CATlC,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CACP,4CAAA,CAAA,cAAA,CADO,EAEP,2CAAA,CAAA,aAAA,CAFO,EAGP,2CAAA,CAAA,aAAA,CAHO,EAIP,0DAAA,CAAA,+BAAA,CAJO,CADD;AAOR,MAAA,YAAY,EAAE,CAAC,gDAAA,CAAA,kBAAA,CAAD;AAPN,KAAT,CASkC,CAAA,EAAtB,sBAAsB,CAAtB;;;;;;;;;;;;;;;;ACnBb,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,mtBAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACef,QAAa,gBAAb;AAAA;AAAA;AAOE,gCAAoB,WAApB,EACmB,SADnB,EAEoB,mBAFpB,EAGoB,MAHpB,EAIoB,KAJpB,EAKmB,OALnB,EAMoB,SANpB,EAM8C;AAAA;;AAN1B,aAAA,WAAA,GAAA,WAAA;AACD,aAAA,SAAA,GAAA,SAAA;AACC,aAAA,mBAAA,GAAA,mBAAA;AACA,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,KAAA,GAAA,KAAA;AACD,aAAA,OAAA,GAAA,OAAA;AACC,aAAA,SAAA,GAAA,SAAA;AACnB;;AAdH;AAAA;AAAA,mCAgBgB;;;;;;;;;AACR,oBAAA,W,GAAc,KAAK,OAAL,CAAa,OAAb,E;AAClB,yBAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,WAAX,CAAZ;AACA,oBAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,KAAK,IAAhC;;AACA,2BAAM,KAAK,QAAL,EAAN;;;;;;;;;AACD;AArBH;AAAA;AAAA,0CAsBuB;;;;;;;;;AACf,oBAAA,W,GAAc,KAAK,OAAL,CAAa,OAAb,E;;wBAEb,W;;;;;AACH,oBAAA,OAAO,CAAC,GAAR,CAAY,YAAZ;;AACA,2BAAM,KAAK,MAAL,CAAY,aAAZ,CAA0B,QAA1B,CAAN;;;;;;;AAEA,yBAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,WAAX,CAAZ;AACA,oBAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,KAAK,IAAhC;;AACA,2BAAM,KAAK,QAAL,EAAN;;;;;;;;;AAEH;AAjCH;AAAA;AAAA,mCAkCgB;;;;;;;;;;AACZ,yBAAK,QAAL,GAAgB,KAAK,KAAL,CAAW,QAAX,CAAoB,QAApB,CAA6B,GAA7B,CAAiC,IAAjC,CAAhB;;AACA,2BAAM,KAAK,mBAAL,CAAyB,QAAzB,CAAkC,KAAK,QAAvC,EAAiD,SAAjD,CAA2D,UAAA,GAAG,EAAG;AACrE,sBAAA,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,KAAhB;AACA,sBAAA,KAAI,CAAC,KAAL,GAAa,GAAG,CAAC,KAAjB;;AACA,sBAAA,KAAI,CAAC,WAAL;AACD,qBAJK,CAAN;;;;;;;;;AAKD;AAzCH;AAAA;AAAA,sCA0CmB;;;;;;;;;;;AACP,oBAAA,K,GAAQ,C;AACZ,oBAAA,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B,KAAK,KAAjC;;AACA,wBAAI,KAAK,KAAL,CAAW,OAAX,KAAuB,IAA3B,EAAiC;AAC/B,2BAAK,KAAL,GAAa,IAAb;AACD,qBAFD,MAEO;AACH,2BAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,UAAA,CAAC,EAAG;AAC/B,4BAAI,CAAC,CAAC,GAAF,KAAU,MAAI,CAAC,IAAL,CAAU,GAAxB,EAA6B;AAC3B,0BAAA,MAAI,CAAC,KAAL,GAAa,KAAb;AACA,0BAAA,KAAK,GAAG,CAAR;AACD;AACF,uBALC;;AAMF,0BAAI,KAAK,KAAK,CAAd,EAAiB;AACf,6BAAK,KAAL,GAAa,IAAb;AACD;AACF;;;;;;;;;AACN;AA1DH;AAAA;AAAA,kCA2De;;;;;;;;;;;AACX,2BAAM,KAAK,mBAAL,CAAyB,OAAzB,CAAiC,KAAK,KAAL,CAAW,GAA5C,EAAiD,KAAK,IAAL,CAAU,GAA3D,EAAgE,SAAhE,CAA0E,UAAA,GAAG,EAAG;AACpF,sBAAA,MAAI,CAAC,MAAL,CAAY,aAAZ,CAA0B,8BAAuB,MAAI,CAAC,KAAL,CAAW,GAAlC,CAA1B;;AACA,sBAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACD,qBAHK,EAGF,UAAA,KAAK,EAAG;AACV,0BAAI,KAAK,CAAC,MAAN,KAAiB,GAArB,EAA0B;AACxB,wBAAA,MAAI,CAAC,WAAL,CAAiB,oBAAjB;AACD;AACF,qBAPK,CAAN;;;;;;;;;AAQD;AApEH;AAAA;AAAA,gCAqEa;;;;;;;;;;;AACT,2BAAM,KAAK,mBAAL,CAAyB,KAAzB,CAA+B,KAAK,KAAL,CAAW,GAA1C,EAA+C,KAAK,IAAL,CAAU,GAAzD,EAA8D,SAA9D,CAAwE,UAAA,GAAG,EAAG;AAClF,sBAAA,MAAI,CAAC,WAAL,CAAiB,wBAAjB;;AACA,sBAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACD,qBAHK,EAGF,UAAA,KAAK,EAAG;AACV,0BAAI,KAAK,CAAC,MAAN,KAAiB,GAArB,EAA0B;AACxB,wBAAA,MAAI,CAAC,WAAL,CAAiB,gBAAjB;AACD;AACF,qBAPK,CAAN;;;;;;;;;AAQD;AA9EH;AAAA;AAAA,oCA+EoB,OA/EpB,EA+E2B;;;;;;;;;;AACX,2BAAM,KAAK,SAAL,CAAe,MAAf,CAAsB;AACtC,sBAAA,OAAO,EAAE,OAD6B;AAEtC,sBAAA,QAAQ,EAAE;AAF4B,qBAAtB,CAAN;;;AAAR,oBAAA,K;;AAIJ,2BAAM,KAAK,CAAC,OAAN,EAAN;;;;;;;;;AACD;AArFH;;AAAA;AAAA,OAAA;;;;cAOmC,2CAAA,CAAA,aAAA;;cACH,2CAAA,CAAA,iBAAA;;cACW,mDAAA,CAAA,qBAAA;;cACb,4CAAA,CAAA,QAAA;;cACD,4CAAA,CAAA,gBAAA;;cACC,uDAAA,CAAA,kBAAA;;cACG,2CAAA,CAAA,iBAAA;;;;AAbpB,IAAA,gBAAgB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAL5B,MAAA,CAAA,0CAAA,CAAA,WAAA,CAAA,CAAA,CAAU;AACT,MAAA,QAAQ,EAAE,mBADD;AAET,MAAA,QAAA,EAAA,kCAAA,CAAA,iBAAA,CAAA,CAAA,mBAAA;AAAA;AAAA,mGAAA,CAAA,EAAA,OAFS;;;;AAAA,KAAV,CAK4B,E,uEAOM,2CAAA,CAAA,aAAA,C,EACH,2CAAA,CAAA,iBAAA,C,EACW,mDAAA,CAAA,qBAAA,C,EACb,4CAAA,CAAA,QAAA,C,EACD,4CAAA,CAAA,gBAAA,C,EACC,uDAAA,CAAA,kBAAA,C,EACG,2CAAA,CAAA,iBAAA,C,EAbJ,CAAA,EAAhB,gBAAgB,CAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJb,QAAa,mBAAb;AAAA;AAAA;AAOE,mCAAoB,UAApB,EAAoD,OAApD,EAAoE;AAAA;;AAAhD,aAAA,UAAA,GAAA,UAAA;AAAgC,aAAA,OAAA,GAAA,OAAA;AALpD,aAAA,oBAAA,GAAuB,sDAAA,CAAA,aAAA,CAAA,CAAY,MAAnC;AACA,aAAA,WAAA,GAAc,IAAI,iCAAA,CAAA,iBAAA,CAAJ,CAAoB,KAApB,CAAd;AAIwE;;AAP1E;AAAA;AAAA,iCASW,EATX,EASqB;AACjB,iBAAO,KAAK,UAAL,CAAgB,GAAhB,CAAyB,UAAG,KAAK,oBAAR,yBAA2C,EAA3C,CAAzB,CAAP;AACD;AAXH;AAAA;AAAA,gCAYU,OAZV,EAY2B,MAZ3B,EAYyC;AACrC,iBAAO,KAAK,UAAL,CAAgB,GAAhB,WAA4B,KAAK,oBAAjC,kBAAoE;AACzE,YAAA,OAAO,EAAE,OADgE;AAEzE,YAAA,MAAM,EAAE;AAFiE,WAApE,CAAP;AAID;AAjBH;AAAA;AAAA,8BAkBQ,OAlBR,EAkByB,MAlBzB,EAkBuC;AACnC,iBAAO,KAAK,UAAL,CAAgB,GAAhB,WAA4B,KAAK,oBAAjC,mBAAqE;AAC1E,YAAA,OAAO,EAAE,OADiE;AAE1E,YAAA,MAAM,EAAE;AAFkE,WAArE,CAAP;AAID;AAvBH;;AAAA;AAAA,OAAA;;;;cAOkC,iDAAA,CAAA,YAAA;;cAA6B,2CAAA,CAAA,SAAA;;;;AAPlD,IAAA,mBAAmB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAH/B,MAAA,CAAA,0CAAA,CAAA,YAAA,CAAA,CAAA,CAAW;AACV,MAAA,UAAU,EAAE;AADF,KAAX,CAG+B,E,uEAOE,iDAAA,CAAA,YAAA,C,EAA6B,2CAAA,CAAA,SAAA,C,EAP/B,CAAA,EAAnB,mBAAmB,CAAnB","sourcesContent":["export default \"<ion-app class=\\\"mobile\\\">\\r\\n  <div class=\\\"ion-page\\\" main>\\r\\n    <ion-header>\\r\\n      <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n          <ion-menu-button></ion-menu-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>Event</ion-title>\\r\\n      </ion-toolbar>\\r\\n    </ion-header>\\r\\n    <ion-content class=\\\"ion-padding\\\">\\r\\n        <div *ngIf=\\\"event\\\">\\r\\n          <ion-card class=\\\"vertical-margin border-top\\\" color=\\\"medium\\\">\\r\\n            <ion-card-content>\\r\\n              <ion-toolbar class=\\\"ion-text-center\\\" color=\\\"light\\\">\\r\\n                <h2><strong>{{event.description}}</strong></h2>\\r\\n              </ion-toolbar>\\r\\n              <ion-toolbar class=\\\"ion-text-center\\\" color=\\\"light\\\">\\r\\n                <ion-icon name=\\\"pin\\\"></ion-icon>{{event.location}}\\r\\n              </ion-toolbar>\\r\\n              <ion-toolbar class=\\\"ion-text-center\\\" color=\\\"light\\\">\\r\\n                {{event.eventDate}}\\r\\n              </ion-toolbar>\\r\\n              <ion-card color=\\\"light\\\">\\r\\n                <ion-card-title class=\\\"ion-text-center\\\"> Members</ion-card-title>\\r\\n                <div *ngFor=\\\"let user of this.event.members\\\">\\r\\n                <ion-card-content>\\r\\n                  <ion-toolbar class=\\\"ion-text-center\\\">\\r\\n                    {{user.name}}\\r\\n                  </ion-toolbar>\\r\\n                </ion-card-content>\\r\\n                </div>\\r\\n              </ion-card>\\r\\n              <div *ngIf=\\\"check === 'no'; else other\\\">\\r\\n                <ion-button expand=\\\"block\\\" (click)=\\\"asistir()\\\">Asistir</ion-button>\\r\\n              </div>\\r\\n              <ng-template #other>\\r\\n                <ion-button expand=\\\"block\\\" (click)=\\\"leave()\\\">Leave</ion-button>\\r\\n              </ng-template>\\r\\n            </ion-card-content>\\r\\n          </ion-card>\\r\\n        </div>\\r\\n    </ion-content>\\r\\n  </div>\\r\\n</ion-app>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ProfileEventPage } from './profile-event.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProfileEventPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProfileEventPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProfileEventPageRoutingModule } from './profile-event-routing.module';\r\n\r\nimport { ProfileEventPage } from './profile-event.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ProfileEventPageRoutingModule\r\n  ],\r\n  declarations: [ProfileEventPage]\r\n})\r\nexport class ProfileEventPageModule {}\r\n","export default \"ion-card-title.ion-text-center {\\n  margin-top: 5%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvcHJvZmlsZS1ldmVudC9DOlxcVXNlcnNcXHNnYWxlXFxXZWJzdG9ybVByb2plY3RzXFxFcmFzbXVzQXBwL3NyY1xcYXBwXFx2aWV3c1xccHJvZmlsZS1ldmVudFxccHJvZmlsZS1ldmVudC5wYWdlLnNjc3MiLCJzcmMvYXBwL3ZpZXdzL3Byb2ZpbGUtZXZlbnQvcHJvZmlsZS1ldmVudC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC92aWV3cy9wcm9maWxlLWV2ZW50L3Byb2ZpbGUtZXZlbnQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNhcmQtdGl0bGUuaW9uLXRleHQtY2VudGVye1xyXG4gIG1hcmdpbi10b3A6IDUlO1xyXG59XHJcbiIsImlvbi1jYXJkLXRpdGxlLmlvbi10ZXh0LWNlbnRlciB7XG4gIG1hcmdpbi10b3A6IDUlO1xufSJdfQ== */\"","import {Component, OnInit} from '@angular/core';\r\nimport {User} from '../../models/User/user';\r\nimport {FormBuilder} from '@angular/forms';\r\nimport {AlertController, ToastController} from '@ionic/angular';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {StorageComponent} from '../../storage/storage.component';\r\nimport {ProfileEventService} from './profile-event.service';\r\nimport {Event} from '../../models/Events/Event';\r\nimport {CheckUser} from '../../models/User/checkUser';\r\n\r\n@Component({\r\n  selector: 'app-profile-event',\r\n  templateUrl: './profile-event.page.html',\r\n  styleUrls: ['./profile-event.page.scss'],\r\n})\r\nexport class ProfileEventPage implements OnInit {\r\n\r\n  user: User;\r\n  _idEvent: string;\r\n  event: Event;\r\n  check: string;\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              public alertCtrl: AlertController,\r\n              private profileEventService: ProfileEventService,\r\n              private router: Router,\r\n              private route: ActivatedRoute,\r\n              public storage: StorageComponent,\r\n              private toastCtrl: ToastController) {\r\n  }\r\n\r\n  async ngOnInit() {\r\n    let storageUser = this.storage.getUser();\r\n    this.user = JSON.parse(storageUser);\r\n    console.log('this.user: ', this.user);\r\n    await this.getEvent();\r\n  }\r\n  async ionViewDidEnter() {\r\n    let storageUser = this.storage.getUser();\r\n\r\n    if (!storageUser) {\r\n      console.log('goto login');\r\n      await this.router.navigateByUrl('/login');\r\n    } else {\r\n      this.user = JSON.parse(storageUser);\r\n      console.log('this.user: ', this.user);\r\n      await this.getEvent();\r\n    }\r\n  }\r\n  async getEvent() {\r\n    this._idEvent = this.route.snapshot.paramMap.get('id');\r\n    await this.profileEventService.getEvent(this._idEvent).subscribe(res => {\r\n      console.log(res.event);\r\n      this.event = res.event;\r\n      this.checkMember();\r\n    });\r\n  }\r\n  async checkMember() {\r\n        let count = 0;\r\n        console.log('this.event: ', this.event);\r\n        if (this.event.members === null) {\r\n          this.check = 'no';\r\n        } else {\r\n            this.event.members.forEach(a => {\r\n            if (a._id === this.user._id) {\r\n              this.check = 'yes';\r\n              count = 1;\r\n            }\r\n          });\r\n          if (count !== 1) {\r\n            this.check = 'no';\r\n          }\r\n        }\r\n  }\r\n  async asistir() {\r\n    await this.profileEventService.asistir(this.event._id, this.user._id).subscribe(res => {\r\n      this.router.navigateByUrl('/profile-event/' + `${this.event._id}`);\r\n      console.log(res);\r\n    },  error => {\r\n      if (error.status === 304) {\r\n        this.launchToast('You are already in');\r\n      }\r\n    });\r\n  }\r\n  async leave() {\r\n    await this.profileEventService.leave(this.event._id, this.user._id).subscribe(res => {\r\n      this.launchToast('You leave successfully');\r\n      console.log(res);\r\n    },  error => {\r\n      if (error.status === 304) {\r\n        this.launchToast('You not are in');\r\n      }\r\n    });\r\n  }\r\n  async launchToast(message) {\r\n    let toast = await this.toastCtrl.create({\r\n      message: message,\r\n      duration: 3000\r\n    });\r\n    await toast.present();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {environment} from '../../../environments/environment';\r\nimport {BehaviorSubject} from 'rxjs';\r\nimport {Post} from '../../models/Posts/post';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Storage} from '@ionic/storage';\r\nimport {EventSend} from '../../models/Events/eventSend';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ProfileEventService {\r\n\r\n  EVENT_SERVER_ADDRESS = environment.apiUri;\r\n  homeSubject = new BehaviorSubject(false);\r\n\r\n  activity: Post[];\r\n\r\n  constructor(private httpClient: HttpClient, private storage: Storage) {}\r\n\r\n  getEvent(id: string) {\r\n    return this.httpClient.get<any>(`${this.EVENT_SERVER_ADDRESS}/event/` + `${id}`);\r\n  }\r\n  asistir(idEvent: string, idUser: string) {\r\n    return this.httpClient.put<any>(`${this.EVENT_SERVER_ADDRESS}/event/join`, {\r\n      eventId: idEvent,\r\n      userId: idUser\r\n    });\r\n  }\r\n  leave(idEvent: string, idUser: string) {\r\n    return this.httpClient.put<any>(`${this.EVENT_SERVER_ADDRESS}/event/leave`, {\r\n      eventId: idEvent,\r\n      userId: idUser\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"views-profile-event-profile-event-module-es5.js"}