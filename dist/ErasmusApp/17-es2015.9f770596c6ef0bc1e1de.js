(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{AU7c:function(l,n,u){"use strict";u.r(n);var e=u("8Y7J");class t{}var i=u("pMnS"),o=u("oBZk"),r=u("ZZ/e"),a=u("SVse"),s=u("s7LF"),b=u("iInd"),c=u("mrSG"),g=u("wo+Y");class d{constructor(l="",n=""){this.email=l,this.password=n}}var m=u("Z5J9"),p=u("25lC");class h{constructor(l,n,u,e,t,i){this.authService=l,this.userService=n,this.toastController=u,this.router=e,this.formBuilder=t,this.storage=i,this.loginForm=this.formBuilder.group({email:new s.e("",s.s.compose([s.s.required,s.s.pattern(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)])),password:new s.e})}ngOnInit(){return c.b(this,void 0,void 0,(function*(){this.validation_messages={email:[{type:"required",message:"Campo obligatorio."},{type:"pattern",message:"Debe ser un correo electr\xf3nico v\xe1lido"}]}}))}ionViewDidEnter(){return c.b(this,void 0,void 0,(function*(){this.storage.getUser()&&(yield this.router.navigateByUrl("/home"))}))}login(){return c.b(this,void 0,void 0,(function*(){this.authService.login(new d(this.loginForm.controls.email.value,this.loginForm.controls.password.value)).subscribe(l=>c.b(this,void 0,void 0,(function*(){const n=l;this.user=n.user,this.user.jwt=n.jwt,console.log(this.user),yield this.storage.saveToken(this.user.jwt),yield this.storage.saveUser(JSON.stringify(this.user)),yield this.router.navigateByUrl("/home")})),l=>c.b(this,void 0,void 0,(function*(){const l=yield this.toastController.create({message:"Bad username or password",position:"top",duration:2e3,showCloseButton:!0,color:"dark"});yield l.present()})))}))}}var C=e.Bb({encapsulation:0,styles:[["*[_ngcontent-%COMP%]{margin:0;padding:0}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{background:#fff;color:#000;font-family:monospace;width:100%;height:100%}ion-content[_ngcontent-%COMP%]{padding-top:5%;padding-bottom:5%}ion-card[_ngcontent-%COMP%]{width:100%;max-width:400px;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);--background:#fff}h3[_ngcontent-%COMP%]{font-size:20px;text-align:center;color:#7e57ff;padding-top:10%;padding-bottom:5%;margin-left:10%;margin-right:10%}h4[_ngcontent-%COMP%]{font-size:13px;text-align:left;margin-top:5%;margin-left:5%;margin-bottom:3%}ion-item[_ngcontent-%COMP%]{font-size:16px;margin-right:5%}ion-chip[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%;padding:5%;text-align:center}ion-label[_ngcontent-%COMP%]{margin-right:5%}ion-text[_ngcontent-%COMP%]{margin-left:5%}ion-button[_ngcontent-%COMP%]{width:75%;margin-left:12.5%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center}ion-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{color:#383a3e}.no-margin[_ngcontent-%COMP%]{margin:0}"]],data:{}});function f(l){return e.Yb(0,[(l()(),e.Db(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.Db(1,0,null,null,2,"ion-chip",[["color","danger"]],null,null,null,o.T,o.m)),e.Cb(2,49152,null,0,r.t,[e.j,e.p,e.G],{color:[0,"color"]},null),(l()(),e.Wb(3,0,[" "," "]))],(function(l,n){l(n,2,0,"danger")}),(function(l,n){l(n,3,0,n.parent.context.$implicit.message)}))}function v(l){return e.Yb(0,[(l()(),e.Db(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.sb(16777216,null,null,1,null,f)),e.Cb(2,16384,null,0,a.j,[e.Y,e.U],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(0,null,null,0))],(function(l,n){var u=n.component;l(n,2,0,u.loginForm.get("email").hasError(n.context.$implicit.type)&&(u.loginForm.get("email").dirty||u.loginForm.get("email").touched))}),null)}function P(l){return e.Yb(0,[(l()(),e.Db(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.Db(1,0,null,null,2,"ion-chip",[["color","success"]],null,null,null,o.T,o.m)),e.Cb(2,49152,null,0,r.t,[e.j,e.p,e.G],{color:[0,"color"]},null),(l()(),e.Wb(-1,0,["Correo electr\xf3nico v\xe1lido!"]))],(function(l,n){l(n,2,0,"success")}),null)}function y(l){return e.Yb(0,[(l()(),e.Db(0,0,null,null,63,"ion-content",[["class","ion-padding"],["color","tertiary"]],null,null,null,o.V,o.o)),e.Cb(1,49152,null,0,r.v,[e.j,e.p,e.G],{color:[0,"color"]},null),(l()(),e.Db(2,0,null,0,61,"ion-card",[["class","item item-text-wrap"]],null,null,null,o.R,o.g)),e.Cb(3,49152,null,0,r.n,[e.j,e.p,e.G],null,null),(l()(),e.Db(4,0,null,0,59,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0,i=l.component;return"submit"===n&&(t=!1!==e.Pb(l,6).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Pb(l,6).onReset()&&t),"ngSubmit"===n&&(t=!1!==i.login()&&t),t}),null,null)),e.Cb(5,16384,null,0,s.w,[],null,null),e.Cb(6,540672,null,0,s.h,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),e.Tb(2048,null,s.b,null,[s.h]),e.Cb(8,16384,null,0,s.n,[[4,s.b]],null,null),(l()(),e.Db(9,0,null,null,54,"ion-grid",[],null,null,null,o.X,o.q)),e.Cb(10,49152,null,0,r.B,[e.j,e.p,e.G],null,null),(l()(),e.Db(11,0,null,0,43,"ion-row",[["class","ion-justify-content-center"],["color","tertiary"]],null,null,null,o.ib,o.B)),e.Cb(12,49152,null,0,r.kb,[e.j,e.p,e.G],null,null),(l()(),e.Db(13,0,null,0,41,"ion-col",[["class","ion-align-self-center"],["size-lg","11"],["size-xs","12"]],null,null,null,o.U,o.n)),e.Cb(14,49152,null,0,r.u,[e.j,e.p,e.G],null,null),(l()(),e.Db(15,0,null,0,2,"div",[],null,null,null,null,null)),(l()(),e.Db(16,0,null,null,1,"h3",[["class","no-margin"]],null,null,null,null,null)),(l()(),e.Wb(-1,null,["Inicia sesi\xf3n para entrar en Erasmus!"])),(l()(),e.Db(18,0,null,0,13,"ion-item",[["class","ion-padding-bottom"]],null,null,null,o.bb,o.u)),e.Cb(19,49152,null,0,r.I,[e.j,e.p,e.G],null,null),(l()(),e.Db(20,0,null,0,2,"ion-label",[["color","tertiary"]],null,null,null,o.cb,o.v)),e.Cb(21,49152,null,0,r.O,[e.j,e.p,e.G],{color:[0,"color"]},null),(l()(),e.Wb(-1,0,["Correo electr\xf3nico"])),(l()(),e.Db(23,0,null,0,8,"ion-input",[["formControlName","email"],["name","email"],["placeholder","tu@email.com"],["required",""],["type","email"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var t=!0;return"ionBlur"===n&&(t=!1!==e.Pb(l,26)._handleBlurEvent(u.target)&&t),"ionChange"===n&&(t=!1!==e.Pb(l,26)._handleInputEvent(u.target)&&t),t}),o.ab,o.t)),e.Cb(24,16384,null,0,s.r,[],{required:[0,"required"]},null),e.Tb(1024,null,s.j,(function(l){return[l]}),[s.r]),e.Cb(26,16384,null,0,r.Nb,[e.p],null,null),e.Tb(1024,null,s.k,(function(l){return[l]}),[r.Nb]),e.Cb(28,671744,null,0,s.f,[[3,s.b],[6,s.j],[8,null],[6,s.k],[2,s.v]],{name:[0,"name"]},null),e.Tb(2048,null,s.l,null,[s.f]),e.Cb(30,16384,null,0,s.m,[[4,s.l]],null,null),e.Cb(31,49152,null,0,r.H,[e.j,e.p,e.G],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(l()(),e.Db(32,0,null,0,4,"div",[["class","validation-errors"]],null,null,null,null,null)),(l()(),e.sb(16777216,null,null,1,null,v)),e.Cb(34,278528,null,0,a.i,[e.Y,e.U,e.y],{ngForOf:[0,"ngForOf"]},null),(l()(),e.sb(16777216,null,null,1,null,P)),e.Cb(36,16384,null,0,a.j,[e.Y,e.U],{ngIf:[0,"ngIf"]},null),(l()(),e.Db(37,0,null,0,13,"ion-item",[["class","ion-padding-bottom"]],null,null,null,o.bb,o.u)),e.Cb(38,49152,null,0,r.I,[e.j,e.p,e.G],null,null),(l()(),e.Db(39,0,null,0,2,"ion-label",[["color","tertiary"]],null,null,null,o.cb,o.v)),e.Cb(40,49152,null,0,r.O,[e.j,e.p,e.G],{color:[0,"color"]},null),(l()(),e.Wb(-1,0,["Contrase\xf1a"])),(l()(),e.Db(42,0,null,0,8,"ion-input",[["formControlName","password"],["name","password"],["placeholder","Password"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var t=!0;return"ionBlur"===n&&(t=!1!==e.Pb(l,45)._handleBlurEvent(u.target)&&t),"ionChange"===n&&(t=!1!==e.Pb(l,45)._handleInputEvent(u.target)&&t),t}),o.ab,o.t)),e.Cb(43,16384,null,0,s.r,[],{required:[0,"required"]},null),e.Tb(1024,null,s.j,(function(l){return[l]}),[s.r]),e.Cb(45,16384,null,0,r.Nb,[e.p],null,null),e.Tb(1024,null,s.k,(function(l){return[l]}),[r.Nb]),e.Cb(47,671744,null,0,s.f,[[3,s.b],[6,s.j],[8,null],[6,s.k],[2,s.v]],{name:[0,"name"]},null),e.Tb(2048,null,s.l,null,[s.f]),e.Cb(49,16384,null,0,s.m,[[4,s.l]],null,null),e.Cb(50,49152,null,0,r.H,[e.j,e.p,e.G],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(l()(),e.Db(51,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),e.Db(52,0,null,null,2,"ion-button",[["color","tertiary"],["expand","block"],["size","large"],["type","submit"]],null,null,null,o.L,o.e)),e.Cb(53,49152,null,0,r.l,[e.j,e.p,e.G],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"],size:[3,"size"],type:[4,"type"]},null),(l()(),e.Wb(-1,0,["LOGIN"])),(l()(),e.Db(55,0,null,0,8,"ion-row",[["color","tertiary"]],null,null,null,o.ib,o.B)),e.Cb(56,49152,null,0,r.kb,[e.j,e.p,e.G],null,null),(l()(),e.Db(57,0,null,0,6,"h4",[],null,null,null,null,null)),(l()(),e.Wb(-1,null,["Si todav\xeda no tienes una cuenta en Erasmus, "])),(l()(),e.Db(59,0,null,null,3,"a",[["routerLink","/register"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Pb(l,60).onClick(u)&&t),"click"===n&&(t=!1!==e.Pb(l,61).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.Cb(60,737280,null,0,r.Mb,[a.g,r.Jb,e.p,b.m,[2,b.n]],null,null),e.Cb(61,671744,null,0,b.o,[b.m,b.a,a.g],{routerLink:[0,"routerLink"]},null),(l()(),e.Wb(-1,null,["reg\xedstrate"])),(l()(),e.Wb(-1,null,["!"]))],(function(l,n){var u=n.component;l(n,1,0,"tertiary"),l(n,6,0,u.loginForm),l(n,21,0,"tertiary"),l(n,24,0,""),l(n,28,0,"email"),l(n,31,0,"email","tu@email.com","","email"),l(n,34,0,u.validation_messages.email),l(n,36,0,u.loginForm.controls.email.valid),l(n,40,0,"tertiary"),l(n,43,0,""),l(n,47,0,"password"),l(n,50,0,"password","Password","","password"),l(n,53,0,"tertiary",u.loginForm.invalid,"block","large","submit"),l(n,60,0),l(n,61,0,"/register")}),(function(l,n){l(n,4,0,e.Pb(n,8).ngClassUntouched,e.Pb(n,8).ngClassTouched,e.Pb(n,8).ngClassPristine,e.Pb(n,8).ngClassDirty,e.Pb(n,8).ngClassValid,e.Pb(n,8).ngClassInvalid,e.Pb(n,8).ngClassPending),l(n,23,0,e.Pb(n,24).required?"":null,e.Pb(n,30).ngClassUntouched,e.Pb(n,30).ngClassTouched,e.Pb(n,30).ngClassPristine,e.Pb(n,30).ngClassDirty,e.Pb(n,30).ngClassValid,e.Pb(n,30).ngClassInvalid,e.Pb(n,30).ngClassPending),l(n,42,0,e.Pb(n,43).required?"":null,e.Pb(n,49).ngClassUntouched,e.Pb(n,49).ngClassTouched,e.Pb(n,49).ngClassPristine,e.Pb(n,49).ngClassDirty,e.Pb(n,49).ngClassValid,e.Pb(n,49).ngClassInvalid,e.Pb(n,49).ngClassPending),l(n,59,0,e.Pb(n,61).target,e.Pb(n,61).href)}))}function w(l){return e.Yb(0,[(l()(),e.Db(0,0,null,null,1,"app-login",[],null,null,null,y,C)),e.Cb(1,114688,null,0,h,[g.a,m.a,r.Ob,b.m,s.d,p.a],null,null)],(function(l,n){l(n,1,0)}),null)}var D=e.zb("app-login",h,w,{},{},[]);class k{}u.d(n,"LoginPageModuleNgFactory",(function(){return j}));var j=e.Ab(t,[],(function(l){return e.Mb([e.Nb(512,e.m,e.lb,[[8,[i.a,D]],[3,e.m],e.E]),e.Nb(4608,a.l,a.k,[e.A,[2,a.w]]),e.Nb(4608,s.u,s.u,[]),e.Nb(4608,r.b,r.b,[e.G,e.g]),e.Nb(4608,r.Ib,r.Ib,[r.b,e.m,e.x]),e.Nb(4608,r.Lb,r.Lb,[r.b,e.m,e.x]),e.Nb(4608,s.d,s.d,[]),e.Nb(1073742336,a.b,a.b,[]),e.Nb(1073742336,s.t,s.t,[]),e.Nb(1073742336,s.i,s.i,[]),e.Nb(1073742336,r.Fb,r.Fb,[]),e.Nb(1073742336,b.p,b.p,[[2,b.u],[2,b.m]]),e.Nb(1073742336,k,k,[]),e.Nb(1073742336,s.q,s.q,[]),e.Nb(1073742336,t,t,[]),e.Nb(1024,b.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);