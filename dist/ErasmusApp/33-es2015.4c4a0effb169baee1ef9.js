(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{OEBu:function(l,n,u){"use strict";u.r(n);var t=u("8Y7J");class e{}var i=u("pMnS"),o=u("oBZk"),s=u("ZZ/e"),r=u("SVse"),b=u("mrSG"),c=u("25lC"),a=u("AytR"),h=u("2Vo4"),v=u("IheW"),p=u("xgBC");let d=(()=>{class l{constructor(l,n){this.httpClient=l,this.storage=n,this.EVENT_SERVER_ADDRESS=a.a.apiUri,this.homeSubject=new h.a(!1)}getEvent(l){return this.httpClient.get(`${this.EVENT_SERVER_ADDRESS}/event/`+`${l}`)}asistir(l,n){return this.httpClient.put(`${this.EVENT_SERVER_ADDRESS}/event/join`,{eventId:l,userId:n})}leave(l,n){return this.httpClient.put(`${this.EVENT_SERVER_ADDRESS}/event/leave`,{eventId:l,userId:n})}}return l.ngInjectableDef=t.bc({factory:function(){return new l(t.cc(v.c),t.cc(p.b))},token:l,providedIn:"root"}),l})();class f{constructor(l,n,u,t,e,i,o){this.formBuilder=l,this.alertCtrl=n,this.profileEventService=u,this.router=t,this.route=e,this.storage=i,this.toastCtrl=o}ngOnInit(){return b.b(this,void 0,void 0,(function*(){let l=this.storage.getUser();this.user=JSON.parse(l),console.log("this.user: ",this.user),yield this.getEvent()}))}ionViewDidEnter(){return b.b(this,void 0,void 0,(function*(){let l=this.storage.getUser();l?(this.user=JSON.parse(l),console.log("this.user: ",this.user),yield this.getEvent()):(console.log("goto login"),yield this.router.navigateByUrl("/login"))}))}getEvent(){return b.b(this,void 0,void 0,(function*(){this._idEvent=this.route.snapshot.paramMap.get("id"),yield this.profileEventService.getEvent(this._idEvent).subscribe(l=>{console.log(l.event),this.event=l.event,this.checkMember()})}))}checkMember(){return b.b(this,void 0,void 0,(function*(){let l=0;console.log("this.event: ",this.event),null===this.event.members?this.check="no":(this.event.members.forEach(n=>{n._id===this.user._id&&(this.check="yes",l=1)}),1!==l&&(this.check="no"))}))}asistir(){return b.b(this,void 0,void 0,(function*(){yield this.profileEventService.asistir(this.event._id,this.user._id).subscribe(l=>{this.router.navigateByUrl("/profile-event/"+`${this.event._id}`),console.log(l)},l=>{304===l.status&&this.launchToast("You are already in")})}))}leave(){return b.b(this,void 0,void 0,(function*(){yield this.profileEventService.leave(this.event._id,this.user._id).subscribe(l=>{this.launchToast("You leave successfully"),console.log(l)},l=>{304===l.status&&this.launchToast("You not are in")})}))}launchToast(l){return b.b(this,void 0,void 0,(function*(){let n=yield this.toastCtrl.create({message:l,duration:3e3});yield n.present()}))}}var g=u("s7LF"),D=u("iInd"),E=t.Bb({encapsulation:0,styles:[[""]],data:{}});function m(l){return t.Yb(0,[(l()(),t.Db(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),t.Db(1,0,null,null,4,"ion-card-content",[],null,null,null,o.N,o.h)),t.Cb(2,49152,null,0,s.o,[t.j,t.p,t.G],null,null),(l()(),t.Db(3,0,null,0,2,"ion-toolbar",[],null,null,null,o.nb,o.G)),t.Cb(4,49152,null,0,s.Db,[t.j,t.p,t.G],null,null),(l()(),t.Wb(5,0,[" "," "]))],null,(function(l,n){l(n,5,0,n.context.$implicit.name)}))}function C(l){return t.Yb(0,[(l()(),t.Db(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),t.Db(1,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.asistir()&&t),t}),o.L,o.e)),t.Cb(2,49152,null,0,s.l,[t.j,t.p,t.G],{expand:[0,"expand"]},null),(l()(),t.Wb(-1,0,["Asistir"]))],(function(l,n){l(n,2,0,"block")}),null)}function G(l){return t.Yb(0,[(l()(),t.Db(0,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.leave()&&t),t}),o.L,o.e)),t.Cb(1,49152,null,0,s.l,[t.j,t.p,t.G],{expand:[0,"expand"]},null),(l()(),t.Wb(-1,0,["Leave"]))],(function(l,n){l(n,1,0,"block")}),null)}function j(l){return t.Yb(0,[(l()(),t.Db(0,0,null,null,23,"div",[],null,null,null,null,null)),(l()(),t.Db(1,0,null,null,22,"ion-card",[["class","vertical-margin border-top"],["color","light"]],null,null,null,o.R,o.g)),t.Cb(2,49152,null,0,s.n,[t.j,t.p,t.G],{color:[0,"color"]},null),(l()(),t.Db(3,0,null,0,20,"ion-card-content",[],null,null,null,o.N,o.h)),t.Cb(4,49152,null,0,s.o,[t.j,t.p,t.G],null,null),(l()(),t.Db(5,0,null,0,2,"ion-toolbar",[],null,null,null,o.nb,o.G)),t.Cb(6,49152,null,0,s.Db,[t.j,t.p,t.G],null,null),(l()(),t.Wb(7,0,[" "," "])),(l()(),t.Db(8,0,null,0,2,"ion-toolbar",[],null,null,null,o.nb,o.G)),t.Cb(9,49152,null,0,s.Db,[t.j,t.p,t.G],null,null),(l()(),t.Wb(10,0,[" "," "])),(l()(),t.Db(11,0,null,0,2,"ion-toolbar",[],null,null,null,o.nb,o.G)),t.Cb(12,49152,null,0,s.Db,[t.j,t.p,t.G],null,null),(l()(),t.Wb(13,0,[" "," "])),(l()(),t.Db(14,0,null,0,6,"ion-card",[],null,null,null,o.R,o.g)),t.Cb(15,49152,null,0,s.n,[t.j,t.p,t.G],null,null),(l()(),t.Db(16,0,null,0,2,"ion-card-title",[],null,null,null,o.Q,o.k)),t.Cb(17,49152,null,0,s.r,[t.j,t.p,t.G],null,null),(l()(),t.Wb(-1,0,["Members"])),(l()(),t.sb(16777216,null,0,1,null,m)),t.Cb(20,278528,null,0,r.i,[t.Y,t.U,t.y],{ngForOf:[0,"ngForOf"]},null),(l()(),t.sb(16777216,null,0,1,null,C)),t.Cb(22,16384,null,0,r.j,[t.Y,t.U],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t.sb(0,[["other",2]],0,0,null,G))],(function(l,n){var u=n.component;l(n,2,0,"light"),l(n,20,0,u.event.members),l(n,22,0,"no"===u.check,t.Pb(n,23))}),(function(l,n){var u=n.component;l(n,7,0,u.event.description),l(n,10,0,u.event.location),l(n,13,0,u.event.eventDate)}))}function N(l){return t.Yb(0,[(l()(),t.Db(0,0,null,null,17,"ion-app",[["class","mobile"]],null,null,null,o.H,o.a)),t.Cb(1,49152,null,0,s.f,[t.j,t.p,t.G],null,null),(l()(),t.Db(2,0,null,0,15,"div",[["class","ion-page"],["main",""]],null,null,null,null,null)),(l()(),t.Db(3,0,null,null,10,"ion-header",[],null,null,null,o.Y,o.r)),t.Cb(4,49152,null,0,s.C,[t.j,t.p,t.G],null,null),(l()(),t.Db(5,0,null,0,8,"ion-toolbar",[],null,null,null,o.nb,o.G)),t.Cb(6,49152,null,0,s.Db,[t.j,t.p,t.G],null,null),(l()(),t.Db(7,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,o.M,o.f)),t.Cb(8,49152,null,0,s.m,[t.j,t.p,t.G],null,null),(l()(),t.Db(9,0,null,0,1,"ion-menu-button",[],null,null,null,o.fb,o.z)),t.Cb(10,49152,null,0,s.S,[t.j,t.p,t.G],null,null),(l()(),t.Db(11,0,null,0,2,"ion-title",[],null,null,null,o.mb,o.F)),t.Cb(12,49152,null,0,s.Bb,[t.j,t.p,t.G],null,null),(l()(),t.Wb(-1,0,["Event"])),(l()(),t.Db(14,0,null,null,3,"ion-content",[["class","ion-padding"]],null,null,null,o.V,o.o)),t.Cb(15,49152,null,0,s.v,[t.j,t.p,t.G],null,null),(l()(),t.sb(16777216,null,0,1,null,j)),t.Cb(17,16384,null,0,r.j,[t.Y,t.U],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,17,0,n.component.event)}),null)}function S(l){return t.Yb(0,[(l()(),t.Db(0,0,null,null,1,"app-profile-event",[],null,null,null,N,E)),t.Cb(1,114688,null,0,f,[g.d,s.a,d,D.m,D.a,c.a,s.Ob],null,null)],(function(l,n){l(n,1,0)}),null)}var k=t.zb("app-profile-event",f,S,{},{},[]);class y{}u.d(n,"ProfileEventPageModuleNgFactory",(function(){return I}));var I=t.Ab(e,[],(function(l){return t.Mb([t.Nb(512,t.m,t.lb,[[8,[i.a,k]],[3,t.m],t.E]),t.Nb(4608,r.l,r.k,[t.A,[2,r.w]]),t.Nb(4608,g.u,g.u,[]),t.Nb(4608,s.b,s.b,[t.G,t.g]),t.Nb(4608,s.Ib,s.Ib,[s.b,t.m,t.x]),t.Nb(4608,s.Lb,s.Lb,[s.b,t.m,t.x]),t.Nb(1073742336,r.b,r.b,[]),t.Nb(1073742336,g.t,g.t,[]),t.Nb(1073742336,g.i,g.i,[]),t.Nb(1073742336,s.Fb,s.Fb,[]),t.Nb(1073742336,D.p,D.p,[[2,D.u],[2,D.m]]),t.Nb(1073742336,y,y,[]),t.Nb(1073742336,e,e,[]),t.Nb(1024,D.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);